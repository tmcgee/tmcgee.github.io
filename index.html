<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Tim McGee&#39;s GitHub Home Page</title>

    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.8.3/dojo/dojo.js"data-dojo-config="async: true"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.isotope/2.0.0/isotope.pkgd.min.js"></script>
    <script type="text/javascript">
      require(["dojo/dom", "dojo/request/xhr", "dojo/_base/array", "dojo/dom-construct", "dojo/dom-class", "dojo/on", "dijit/Tooltip", "dojo/domReady!"], function(dom, xhr, array, constr, dClass, on, Tooltip){
    
        /*
        on(dom.byId("profile-circle"), "click", function(){
  		    window.location.href = "https://twitter.com/MoosePoint";
	      });

  	    new Tooltip({
	          connectId: dom.byId("profile-circle"),
	          label: "Visit my Twitter",
	          position: ["below", "after"]
	      });
	      */

        xhr("https://api.github.com/users/tmcgee/repos?sort=full_name?type=all", {
		      handleAs: "json"
	      }).then(function(data){
		      //-- Sort through all github repos --//
		      array.forEach(data, function(repo){
			      if (!repo.fork) {
				      //-- If repo is not a fork, add it to the list --//
				      repoBox = constr.create("div", { id: repo.name }, dom.byId("results"));
				      dClass.add(repoBox, "repo ");

				      repoHeader = constr.create("div", { }, repoBox);
				      dClass.add(repoHeader, "repo-header " + repo.language);

				      repoTitle = constr.create("h2", { }, repoHeader);
				      dClass.add(repoTitle, "repo-title");

				      repoLink = constr.create("a", { href: repo.html_url, innerHTML: repo.name }, repoTitle);
				      repoLanguage = constr.create("h3", { innerHTML: repo.language }, repoHeader);
				      dClass.add(repoLanguage, "repo-language " + repo.language);

				      constr.create("p", { innerHTML: repo.description }, repoBox);
				
				      if (repo.homepage !== null && repo.homepage != "" && !repo.homepage.match(/tmcgee.github.io\/$/)) {
					      projectPage = constr.create("a", { innerHTML: "visit project page", href: repo.homepage }, repoBox);
					      dClass.add(projectPage, "project-link");
				      }

				      statsBox = constr.create("p", {}, repoBox);
				      dClass.add(statsBox, "stats");

				      forkedBox = constr.create("span", { innerHTML: repo.forks_count }, statsBox);
				      dClass.add(forkedBox, "icon-fork");

				      starredBox = constr.create("span", { innerHTML: repo.watchers_count }, statsBox);
				      dClass.add(starredBox, "icon-star");
				
				      console.debug(repo);
			      }
		      });
		      //-- Activate jQuery Isotope --//
		      $('#results').isotope({
			      itemSelector : '.repo',
  			    layoutMode : 'masonry'
	  	    });
      	});
      });
    </script>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Tim McGee&#39;s GitHub Home Page</h1>

        <section id="downloads">
          <a href="https://github.com/tmcgee" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>
  </body>
</html>
